Быстрый старт
===========

Установите на сервер мод `Allocs Fixes <https://7dtd.illy.bz/wiki/Server%20fixes>`_.
--------------------------------------------------------------------

Allocs fixes скорее всего уже установлен на вашем сервере. Даже если нет, вы будете его использовать почти со стопроцентной вероятностью. Так зачем оттягивать неизбежное? 

Чтобы узнать webserver port, вам нужно заглянуть в serverconfig. xml вашего сервера и найти значение параметра “ControlPanelPort”. Значение Webserver port будет равно ControlPanelPort плюс 2.

Если у вас нет прямого доступа к файлу serverconfig. xml (обычно такое происходит, когда хостинг компания устанавливает сервер для вас), то придется слегка попотеть;

* - ControlPanelPort может называться query port у некоторых хостинг провайдеров. Однако, будьте осторожны, т.к. у игры 7DTD также имеется query port, и это не тот же самый порт, который использует CSMM!*
*Запустите сервер и дождитесь его полной загрузки. Вы должны увидеть строку в логах похожую на “1.234 Started Webserver on 8082” (в файле output_log.txt)*
*Дополнительную информацию можно получить по ссылке* https://7dtd.illy.bz/wiki/Integrated%20Webserver

Убедитесь что вебсервер мода allocs fixes работает корректно. для проверки наберите ``ip:port`` в адресной строке вашего браузера. Замените значения IP и PORT данными от вашего игрового сервера (в результате строка должна выглядеть примерно так: http://192.168.0.1:8084 ). При переходе по ссылке вы должны увидеть страницу с картой.

**Примечания**
* - Проверьте настройки сетевого оборудования!*
*    Порт вебсервера должнен быть:*
* 1. Проброшен (PortForward) на роутере*
* 2. Разрешен для подключения на роутере*
* 3. Разрешен для подключения на програмном firewall-е и антивирусе*

Настройка аутентификации для CSMM
--------------------------------------------

Для получения данных и отправки команд, вы должны создать для CSMM логин называемый "authentication name" и пароль, называемый "token". Вы должны придумать их самостоятельно, так что отнеситесь к этой процедуре со всей серьезностью. Эти данные дают полный административный доступ к серверу. Используйте сложные ключи и не делитесь ими ни с кем. Получивший эти данные злоумышленник сможет получить полный административный доступ и даже уничтожить данные всего сервера. Будьте осторожны!

Подключитесь к консоли вашего сервера (через telnet, webpanel, либо войдите в консоль из игры. Любой вариант годится) и выполните следующие команды.

Проверьте, не был ли настроен доступ ранее::

  webtokens list

Если нет - придумайте name(имя) и webtoken(пароль), затем добавьте его::

  webtokens add <name> <token> 0

Не забудьте "0" на конце! Это важно, чтобы CSMM имел именно "0" уровень привилегий для полноценного функционирования.
Запишите или запомните имя и токен, они будут нужны вам для подключения сервера в web интерфейсе CSMM

Перезагрузите разрешения webtoken::

  reloadwebpermissions

**Имя и сам токен чувствительны к регистру! Относитесь к ним как к админскому паролю.**
**(никому не показывайте, не используйте легко угадываемых имен/значений webtokens)**
**Рекомендуется использовать комбинацию цифр, заглавных и прописных английских букв, а также символов**

*по соображениям безопасности удаляйте неиспользуемые webtoken-ы. Список можно получить по команде "webtokens list" *

Добавляем сервер в систему 
----------------

Зайдите на вебсайт CSMM, авторизуйтесь через STEAM и нажмите "add server". Заполните данные и нажмите "submit". Вам станет доступна панель управления сервером (Dashboard). В случае бесплатного пользования система позволяет добавить максимум 2 сервера (условия использования меняются, утоняйте на момент начала использования)

Добавляем дополнительно администратора к вашему серверу 
----------------

**как добавить еще одного администратора вашему серверу в CSMM?**

*Для начала необходимо, чтобы будущий админ зашел в систему CSMM через STEAM. Будет создан его профиль*

*Затем зайдите в настройки сервера (settings) и в разделе базовых настроек (Basic server settings) нажмите синюю кнопку добавить/убрать администратора (add/remove admins). Введите SteamID администратора (обычно это 17-тизначное число). Если ID введен правильно, в нижнем окне вы увидите имя профиля и 2 кнопки добавить и убрать (add и remove).*

*После добавления администратора его имя и SteamID он появится в окне справа, в списке current admins*
